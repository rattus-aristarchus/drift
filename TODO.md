# ФУНКЦИОНАЛЬНОСТЬ

# юай
_мордочка_

- сделать выбор иконок из массива спрайтов а не отдельными файлами

# ио
_чтение/запись с диска_

- сделать автоматическое создание классов из моделей - чтобы автоматически брались поля
с одинаковыми названиями и значение копировалось из модели
- полностью перенести модели в раздел io, и перестать их использовать в логике; класс
model_base будет factory, возвращать будет словарь значений из которых будет инициализироваться 
сущность, и логика не будет ничего знать про то, откуда он берёт эти значения
- модели раньше использовались как абстрактные "неизменяемые" значения; сделать для таких 
значений тупо словарь словарей констант
- сделать needs, produces и т. п. не ссылками на модели, а строками, которые будут получать уже 
готовую сущность из фабрики
- добавить возможность прописывать "pops" и "groups" в csv-файле карты.
(хз насколько важно если карты будут генерируемыми)

# логика
_все что относится к структуре приложения_

- для entities: отделить друг от друга конструкторы и инициализацию (нужно будет
для чтения/записи с диска). инициализацию переместить в factory
- сделать neighbors частью cell
- подумать о том, как сделать эффекты менее привязанными к основному коду
- попробовать нахрен переписать ресурсы - не как отдельный класс, а как 
учетную книгу в Cell, в которой хранятся записи тип - владелец - количество. или 
по крайней мере создавать новый ресурс для каждого владельца. ЗА: один источник правды,
не нужно следить чтобы сумма по собственникам равнялась общему количеству ресурса. ПРОТИВ:


# модели
_что мы, собственно, моделируем. то, что лежит в файлах yaml и effects_

- смена биомов в клетке. сюжет: нижнее течение хуанхэ было всю дорогу 
болотами, и только уже в 1 тыс до р х люди превратили ее в равнины; до
этого жили на полуострове шаньдун, жили в среднем течении хуанхэ, а посередине 
были болота
- колебания температуры. сейчас идут просто по синусоиде; надо к этому добавить
случайную составляющую

- какая у нас проблема с рынком? на рынке обменивается излишек на - все остальное; 
когда только только появляются ремесла, они будут "собирать" оч много излишка; 
значит, нужен более умный механизм превращения в ремесленников; делаем переменную 
draw (или attraction), которая может зависеть от разных вещей, одна из них - прибыльность 
ремесла; и этот draw определяет сколько людей становятся этим сообществом. кроме того, 
нужна переменная barrier - барьер для соц. лифтов, которая будет отниматься от draw 
(или на нее делить draw). дальше в этот механизм встраиваем миграции - для каждой популяции
каждый ход будет список возможных других популяций, к которым её "притягивает" - как в своей
клетке, так и в соседних; правда, для моделей наверное удобнее хранить список популяций, ИЗ
которых эту популяцию можно пополнить

# БАГИ

- если запустить симуляцию surplus_and_craft и после первой экспансии начать прокручивать 
назад, только что созданные популяции никак не меняются
